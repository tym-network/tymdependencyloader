!function(){function r(e){this.groups[e]={id:e,type:"group",notifyOnLoad:[],loadedDependencies:[],members:[]}}function o(e){this.nbAssetsToLoad++,"js"===e.type?i.call(this,e):"link"===e.type?n.call(this,e):"img"===e.type?l.call(this,e):"picture"===e.type&&d.call(this,e)}function a(e){u.call(this,"error",e)}function e(){var e=[];if(function(e){var t,s;for(var i in this.assets){if(this.assets[i].id=i,this.assets[i].notifyOnLoad=[],this.assets[i].loadedDependencies=[],this.assets[i].requires)for(var n in this.assets[i].requires)t=this.assets[i].requires[n],this.assets[t]?this.assets[t].notifyOnLoad.push(i):(this.groups[t]||r.call(this,t),this.groups[t].notifyOnLoad.push(i));else e.push(i);if(this.assets[i].groups)for(var o in this.assets[i].groups)s=this.assets[i].groups[o],this.groups[s]||r.call(this,s),this.groups[s].members.push(i)}}.call(this,e),0!==e.length)for(var t=0,s=e.length;t<s;t++)o.call(this,this.assets[e[t]]);else console.warn('tymdependencyloader - All you assets have at least one "requires". At least one asset have to be loaded without dependency.')}function t(e){return this.assets={},this.groups={},this.nbAssetsToLoad=0,this.nbAssetsLoaded=0,this.callbacks={loaded:[],error:[],complete:[]},this.assets=JSON.parse(JSON.stringify(e)),this}var s=["loaded","error","complete"],c=function(e){var t,s;for(var i in e.notifyOnLoad)t=e.notifyOnLoad[i],this.assets[t].loadedDependencies.push(e.id),this.assets[t].loadedDependencies.length===this.assets[t].requires.length&&o.call(this,this.assets[t]);if(e.groups)for(var n in e.groups)s=e.groups[n],this.groups[s].loadedDependencies.push(e.id),this.groups[s].loadedDependencies.length===this.groups[s].members.length&&c.call(this,this.groups[s]);e.id&&this.nbAssetsLoaded++,u.call(this,"loaded",e),this.nbAssetsLoaded===this.nbAssetsToLoad&&u.call(this,"complete")},i=function(e){var t=this,s=document.createElement("script");s.addEventListener("load",function(){c.call(t,e)}),s.addEventListener("error",function(){a.call(t,e)}),s.src=e.source,document.body.appendChild(s)},n=function(e){var t=this,s=document.createElement("link");if(s.addEventListener("load",function(){c.call(t,e)}),s.addEventListener("error",function(){a.call(t,e)}),s.href=e.source,s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),e.options)for(option in e.options)s.setAttribute(option,e.options[option]);document.head.appendChild(s)},l=function(s){var i=this,n=document.createElement("img");n.addEventListener("load",function(){var e,t=Array.prototype.forEach;n.parentNode.removeChild(n),e=document.querySelectorAll('img[data-src="'+s.source+'"]'),t.call(e,function(e){e.setAttribute("src",s.source),e.removeAttribute("data-src")}),c.call(i,s)}),n.addEventListener("error",function(){a.call(i,s)}),n.src=s.source,n.style.cssText="display: none;",document.body.appendChild(n)},d=function(e){var t,s=this,i=document.createElement("picture"),n=document.createElement("img"),o=function(){return n.removeEventListener("load",o),function(s,i){var e,t=Array.prototype.forEach;e=document.querySelectorAll('img[data-picture="'+s.source+'"]'),t.call(e,function(e){var t=i.cloneNode(!0);t.removeChild(t.querySelector("img")),e.insertAdjacentElement("afterend",t),t.appendChild(e),e.setAttribute("src",s.source),s.srcset&&e.setAttribute("srcset",s.srcset),e.removeAttribute("data-picture"),t.style.cssText=""}),i.parentNode.removeChild(i),c.call(this,s)}.call(s,e,i)};n.addEventListener("load",o),i.addEventListener("error",function(){a.call(s,e)}),i.style.cssText="display: none;",e.sources&&e.sources.forEach(function(e){(t=document.createElement("source")).srcset=e.srcset,e.type&&(t.type=e.type),e.media&&(t.media=e.media),e.sizes&&(t.sizes=e.sizes),i.appendChild(t)}),n.src=e.source,e.srcset&&(n.srcset=e.srcset),i.appendChild(n),document.body.appendChild(i)},u=function(e,t){if(this.callbacks[e]&&0!==this.callbacks[e].length)for(var s=0,i=this.callbacks[e].length;s<i;s++)this.callbacks[e][s](t)};t.prototype.listen=function(e,t){0<=s.indexOf(e)?this.callbacks[e].push(t):console.warn("Event "+e+" not supported by tymDependencyLoader")},t.prototype.load=function(){e.call(this)},window.TymDependencyLoader=t}();