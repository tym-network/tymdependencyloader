!function(){function o(e){this.groups[e]={id:e,type:"group",notifyOnLoad:[],loadedDependencies:[],members:[]}}function r(e){this.nbAssetsToLoad++,"js"===e.type?i.call(this,e):"link"===e.type?n.call(this,e):"img"===e.type?c.call(this,e):"picture"===e.type&&d.call(this,e)}function a(e){u.call(this,"error",e)}function e(){var e=[];if(function(e){var t,s;for(var i in this.assets)this.assets[i].id=i,this.assets[i].notifyOnLoad=[],this.assets[i].loadedDependencies=[];for(var i in this.assets){if(this.assets[i].requires)for(var n in this.assets[i].requires)t=this.assets[i].requires[n],this.assets[t]?this.assets[t].notifyOnLoad.push(i):(this.groups[t]||o.call(this,t),this.groups[t].notifyOnLoad.push(i));else e.push(i);if(this.assets[i].groups)for(var r in this.assets[i].groups)s=this.assets[i].groups[r],this.groups[s]||o.call(this,s),this.groups[s].members.push(i)}}.call(this,e),0!==e.length)if(h(this.assets,this.groups))console.warn('tymdependencyloader - You have a loop in your dependencies. Check your "requires".');else for(var t=0,s=e.length;t<s;t++)r.call(this,this.assets[e[t]]);else console.warn('tymdependencyloader - All you assets have at least one "requires". At least one asset have to be loaded without dependency.')}function t(e){return this.assets={},this.groups={},this.nbAssetsToLoad=0,this.nbAssetsLoaded=0,this.callbacks={loaded:[],error:[],complete:[]},this.assets=JSON.parse(JSON.stringify(e)),this}var s=["loaded","error","complete"],l=function(e){var t,s;for(var i in e.notifyOnLoad)t=e.notifyOnLoad[i],this.assets[t].loadedDependencies.push(e.id),this.assets[t].loadedDependencies.length===this.assets[t].requires.length&&r.call(this,this.assets[t]);if(e.groups)for(var n in e.groups)s=e.groups[n],this.groups[s].loadedDependencies.push(e.id),this.groups[s].loadedDependencies.length===this.groups[s].members.length&&l.call(this,this.groups[s]);e.id&&"group"!==e.type&&this.nbAssetsLoaded++,u.call(this,"loaded",e),this.nbAssetsLoaded===this.nbAssetsToLoad&&u.call(this,"complete")},i=function(e){var t=this,s=document.createElement("script");s.addEventListener("load",function(){l.call(t,e)}),s.addEventListener("error",function(){a.call(t,e)}),s.src=e.source,document.body.appendChild(s)},n=function(e){var t=this,s=document.createElement("link");if(s.addEventListener("load",function(){l.call(t,e)}),s.addEventListener("error",function(){a.call(t,e)}),s.href=e.source,s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),e.options)for(option in e.options)s.setAttribute(option,e.options[option]);document.head.appendChild(s)},c=function(s){var i=this,n=document.createElement("img");n.addEventListener("load",function(){var e,t=Array.prototype.forEach;n.parentNode.removeChild(n),e=document.querySelectorAll('img[data-src="'+s.source+'"]'),t.call(e,function(e){e.setAttribute("src",s.source),e.removeAttribute("data-src")}),l.call(i,s)}),n.addEventListener("error",function(){a.call(i,s)}),n.src=s.source,n.style.cssText="display: none;",document.body.appendChild(n)},d=function(e){var t,s=this,i=document.createElement("picture"),n=document.createElement("img"),r=function(){return n.removeEventListener("load",r),function(s,i){var e,t=Array.prototype.forEach;e=document.querySelectorAll('img[data-picture="'+s.source+'"]'),t.call(e,function(e){var t=i.cloneNode(!0);t.removeChild(t.querySelector("img")),e.insertAdjacentElement("afterend",t),t.appendChild(e),e.setAttribute("src",s.source),s.srcset&&e.setAttribute("srcset",s.srcset),e.removeAttribute("data-picture"),t.style.cssText=""}),i.parentNode.removeChild(i),l.call(this,s)}.call(s,e,i)};n.addEventListener("load",r),i.addEventListener("error",function(){a.call(s,e)}),i.style.cssText="display: none;",e.sources&&e.sources.forEach(function(e){(t=document.createElement("source")).srcset=e.srcset,e.type&&(t.type=e.type),e.media&&(t.media=e.media),e.sizes&&(t.sizes=e.sizes),i.appendChild(t)}),n.src=e.source,e.srcset&&(n.srcset=e.srcset),i.appendChild(n),document.body.appendChild(i)},u=function(e,t){if(this.callbacks[e]&&0!==this.callbacks[e].length)for(var s=0,i=this.callbacks[e].length;s<i;s++)this.callbacks[e][s](t)},h=function(e,t){var l=JSON.parse(JSON.stringify(e)),c=JSON.parse(JSON.stringify(t)),d=0,u=[],h=function(e){var t,s,i,n=[];if(e.index=d,e.lowlink=d,d++,u.push(e),e.onStack=!0,e.requires){for(var r=0,o=e.requires.length;r<o;r++)(s=c[e.requires[r]])&&((i=s.members).unshift(r,1),Array.prototype.splice.apply(e.requires,i),r=s.members.length-1);for(r=0,o=e.requires.length;r<o;r++){var a=l[e.requires[r]];if(void 0===a.index){if(h(a))return!0;e.lowlink=Math.min(e.lowlink,a.lowlink)}else a.onStack&&(e.lowlink=Math.min(e.lowlink,a.index))}}if(e.lowlink===e.index){for(;(t=u.pop()).onStack=!1,n.push(t),e!=t;);if(1<n.length)return!0}return!1};for(var s in l){var i=l[s];if(void 0===i.index&&h(i))return!0}return!1};t.prototype.listen=function(e,t){0<=s.indexOf(e)?this.callbacks[e].push(t):console.warn("Event "+e+" not supported by tymDependencyLoader")},t.prototype.load=function(){e.call(this)},window.TymDependencyLoader=t}();